<div class="sign-in-area">
  <div class="trinta-form bg-white border-radius">
    
    <div class="logo-container text-center mb-4">
      <h3 class="login">Maint-pro</h3>
      <img src="assets/images/reparer (1).png" alt="logo-maint-pro" class="app-logo-form">
    </div>

    <div class="signin-with-socials">
      <p class="login">Connexion</p>
    </div>
    <form [formGroup]="authForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label class="label d-block fw-medium mb-10" for="email">E-mail</label>
        <mat-form-field appearance="fill">
          <mat-label>Adresse email</mat-label>
          <mat-icon matPrefix>mail</mat-icon>
          <input matInput type="email" id="email" formControlName="email" />
          <mat-error *ngIf="authForm.get('email')?.hasError('required') && authForm.get('email')?.touched">
            L'Email est requis.
          </mat-error>
          <mat-error *ngIf="authForm.get('email')?.hasError('email') && authForm.get('email')?.touched">
            Entrer une adresse email valide svp.
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-group">
        <label class="label d-block fw-medium mb-10" for="password">Mot de passe</label>
        <mat-form-field appearance="fill">
          <mat-label>Mot de passe</mat-label>
          <mat-icon matPrefix>lock</mat-icon>
          <input matInput [type]="hide ? 'password' : 'text'" id="password" formControlName="password" required
            minlength="6" /> <!-- J'ai mis 6 pour correspondre à votre TS, ajustez si c'est 8 -->
          <button type="button" class="btn" mat-icon-button matSuffix (click)="hide = !hide"
            [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
            <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="authForm.get('password')?.hasError('required') && authForm.get('password')?.touched">
            Mot de passe requis.
          </mat-error>
          <mat-error *ngIf="authForm.get('password')?.hasError('minlength') && authForm.get('password')?.touched">
            Le mot de passe doit avoir au moins {{ authForm.get('password')?.errors?.['minlength']?.requiredLength }}
            caractères.
          </mat-error>
        </mat-form-field>
      </div>

      <!-- NOUVELLE SECTION POUR L'ERREUR DE CONNEXION -->
      <div *ngIf="loginError" class="login-error-message">
        <mat-icon color="warn">error_outline</mat-icon>
        <span>{{ loginError }}</span>
      </div>

      <div class="info d-flex justify-content-between align-items-center">
        <mat-checkbox class="example-margin" color="primary" [(ngModel)]="rememberMe"
          [ngModelOptions]="{standalone: true}">Se souvenir de moi</mat-checkbox>
        <a routerLink="/auth/forgot-password" class="d-inline-block text-primary">Mot de passe oublié?</a>
      </div>

      <button mat-flat-button color="primary" class="submit-button" type="submit"
        [disabled]="authForm.invalid || isLoading">
        <span *ngIf="!isLoading">Connexion</span>
        <span *ngIf="isLoading">
          <mat-progress-spinner diameter="20" mode="indeterminate" color="accent"
            style="display: inline-block; margin-right: 8px;"></mat-progress-spinner>
          Connexion...
        </span>
      </button>
    </form>
  </div>
</div>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title th:text="'Facture ' + ${facture.id}"></title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 11px; color: #333; }
        .container { width: 100%; margin: 0 auto; padding: 20px; }
        .header { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid #28a745; padding-bottom: 10px; }
        .header .logo { max-width: 90px; }
        img{ height: 50px; width: 50px; border-radius: 50% ;}
        .header .company-info { text-align: right; }
        .header .company-info h1 { margin: 0; color: #28a745; font-size: 16px; }
        .header .company-info p { margin: 2px 0; font-size: 9px; color: #555; }
        .title { text-align: center; margin: 25px 0; }
        .title h2 { font-size: 22px; text-transform: uppercase; letter-spacing: 2px; }
        .info-grid { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; }
        .info-box { width: 48%; border: 1px solid #ddd; padding: 10px; border-radius: 5px; }
        .info-box h3 { margin-top: 0; font-size: 13px; color: #28a745; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .info-box p { margin: 4px 0; }
        .info-box p strong { display: inline-block; width: 120px; }
        .section-title { font-size: 14px; font-weight: bold; color: #28a745; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-top: 20px; margin-bottom: 10px; }
        .articles-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .articles-table th, .articles-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .articles-table th { background-color: #f2f2f2; font-weight: bold; }
        .articles-table .text-right { text-align: right; }
        .articles-table .text-center { text-align: center; }
        .total-section { float: right; width: 45%; margin-top: 15px; }
        .total-table { width: 100%; border: 1px solid #ddd; }
        .total-table td { padding: 8px; }
        .total-table .label { font-weight: bold; text-align: right; border-bottom: 1px solid #eee;}
        .total-table .value { text-align: right; border-bottom: 1px solid #eee;}
        .total-table .grand-total { font-weight: bold; font-size: 13px; background-color: #e8f5e9; }
        .payment-info { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 15px; font-size: 10px; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <img th:src="@{images/BETANG.JPG}" alt="Logo" class="logo" />
        <div class="company-info">
            <h1>BETANG ENGINEERING S.A.R.L</h1>
            <p>B.P. 12345, Douala, Cameroun</p>
            <p>Tél: (+237) 690 00 00 00</p>
        </div>
    </div>
    <div class="title">
        <h2>Facture</h2>
    </div>

    <div class="info-grid">
        <div class="info-box">
            <h3>Client</h3>
            <p><strong th:text="${facture.clientNom}">NOM DU CLIENT</strong></p>
            <p th:text="${facture.clientEmail}">email@client.com</p>
            <p th:text="${facture.clientNumero}">+123 456 7890</p>
        </div>
        <div class="info-box">
            <h3>Informations Facture</h3>
            <p><strong>N° Facture :</strong> <span th:text="${facture.id}">FA-BE-2024-05-001</span></p>
            <p><strong>Date :</strong> <span th:text="${#temporals.format(facture.dateFacturation, 'dd/MM/yyyy')}">20/05/2024</span></p>
            <p><strong>Date d'échéance :</strong> <span th:text="${#temporals.format(facture.dateEcheance, 'dd/MM/yyyy')}">19/06/2024</span></p>
            <p><strong>Réf. Devis :</strong> <span th:text="${facture.devisId}">DEVIS-2024-04-012</span></p>
        </div>
    </div>

    <div class="section-title" th:text="'Objet : ' + ${facture.devisDescription}">Objet de la prestation</div>
    
    <table class="articles-table">
        <thead>
        <tr>
            <th>Désignation</th>
            <th class="text-center">Quantité</th>
            <th class="text-right">P.U. H.T</th>
            <th class="text-right">Total H.T</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="article : ${facture.articles}">
            <td th:text="${article.designation}">Article</td>
            <td class="text-center" th:text="${article.quantite}">1</td>
            <td class="text-right" th:text="${#numbers.formatDecimal(article.prixUnitaire, 1, 'WHITESPACE', 2, 'COMMA')} + ' ' + ${facture.devise}">10 000,00 XAF</td>
            <td class="text-right" th:text="${#numbers.formatDecimal(article.prixTotal, 1, 'WHITESPACE', 2, 'COMMA')} + ' ' + ${facture.devise}">10 000,00 XAF</td>
        </tr>
        </tbody>
    </table>

    <div class="total-section">
        <table class="total-table">
            <tr>
                <td class="label">Total H.T :</td>
                <td class="value" th:text="${#numbers.formatDecimal(facture.totalHT, 1, 'WHITESPACE', 2, 'COMMA')} + ' ' + ${facture.devise}"></td>
            </tr>
            <tr>
                <td class="label">TVA (19.25%) :</td>
                <td class="value" th:text="${#numbers.formatDecimal(facture.tva, 1, 'WHITESPACE', 2, 'COMMA')} + ' ' + ${facture.devise}"></td>
            </tr>
            <tr class="grand-total">
                <td class="label">Total T.T.C :</td>
                <td class="value" th:text="${#numbers.formatDecimal(facture.totalTTC, 1, 'WHITESPACE', 2, 'COMMA')} + ' ' + ${facture.devise}"></td>
            </tr>
        </table>
    </div>
    
    <div style="clear: both;"></div>

    <div class="payment-info">
        <p>Arrêté la présente facture à la somme de : <strong th:text="${facture.totalTtcEnLettres}">...</strong>.</p>
        <p><strong>Conditions de paiement :</strong> Paiement à 30 jours net.</p>
        <p><strong>Informations bancaires :</strong> [Vos informations bancaires ici]</p>
    </div>
</div>
</body>
</html>